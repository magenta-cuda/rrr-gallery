!function(){var C=window.bbg_xiv=window.bbg_xiv||{};C.docUrl="http://docs.magentacuda.com/",C.helpOptionsUrl="http://docs.magentacuda.com/#options",C.galleryOfGalleriesTitle=bbg_xiv_lang.galleryOfGalleriesTitle,C.templateOptions={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"},C.images={},C.search={},C.galleries={},C.Image=Backbone.Model.extend({idAttribute:window.bbg_xiv.bbg_xiv_wp_rest_api?"id":"ID"}),C.Images=Backbone.Collection.extend({model:C.Image}),C.ImageView=Backbone.View.extend({render:function(e){var i=this.template(this.model.attributes);return e?i:(this.$el.html(i),this)}}),C.GalleryView=Backbone.View.extend({render:function(){var e=this.template(this.model.attributes);return this.$el.html(e),this}}),C.renderBootstrapGallery=function(e,i){new C.ImageView;e.empty(),ReactDOM.render(GalleryContainer(i),e.get(0))},C.renderFlex=function(e,i){e.empty(),ReactDOM.render(FlexContainer(i),e.get(0)),"touch"===C.guiInterface&&e.find("div.bbg_xiv-flex_container div.bbg_xiv-flex_item div.bbg_xiv-dense_full_btn").addClass("bbg_xiv-touch")},C.renderTiles=function(t,e,i){t.addClass("bbg_xiv-tiles_container"),-1!==i.indexOf("contain")?t.addClass("bbg_xiv-contain"):-1!==i.indexOf("fill")&&t.addClass("bbg_xiv-fill"),C.renderFlex(t,e),Modernizr.objectfit&&-1===i.indexOf("contain")||t.find("div.bbg_xiv-flex_item img").load(function(){this.naturalWidth<this.naturalHeight&&jQuery(this).addClass("bbg_xiv-portrait")});var a=t.find("div.bbg_xiv-flex_container").closest("div.bbg_xiv-gallery").addClass("bbg_xiv-caption_visible");a.find("button.bbg_xiv-titles").attr("title",bbg_xiv_lang["hide titles"]),t.find("div.bbg_xiv-dense_full_btn").hover(function(){a.hasClass("bbg_xiv-caption_visible")||jQuery(this).parents("div.bbg_xiv-flex_item").find("figure figcaption").each(function(){jQuery(this).show()})},function(){a.hasClass("bbg_xiv-caption_visible")||jQuery(this).parents("div.bbg_xiv-flex_item").find("figure figcaption").each(function(){jQuery(this).hide()})}),"touch"===C.guiInterface&&t.find("div.bbg_xiv-flex_item a").click(function(e){if(!a.hasClass("bbg_xiv-caption_visible")){var i=jQuery(this.parentNode).find("figure figcaption");i.data("visible")||(t.find("div.bbg_xiv-flex_item figure figcaption").data("visible",!1),i.data("visible",!0),e.preventDefault())}})},C.renderCarousel=function(e,i,t){var a=e.width(),n=new C.ImageView;n.template=_.template(jQuery("script#bbg_xiv-template_carousel_item").html(),null,C.templateOptions);var r="",l="";i.forEach(function(e,i){e.attributes.browser=C.browser,e.attributes.index=i,e.attributes.bbg_xiv_container_width=a,n.model=e,r+='<li data-target="#'+t+'" data-slide-to="'+i+'"'+(0===i?' class="active"':"")+"></li>",l+=n.render(!0)});var s=new C.GalleryView({model:{attributes:{id:t,gallery:i.id,size:i.length,bullets:r,items:l}}});s.template=_.template(jQuery("script#bbg_xiv-template_carousel_container").html(),null,C.templateOptions),e.empty(),e.append(s.render().$el.find("div.carousel.slide"))},C.renderTabs=function(e,i,t){var a=e.width(),n=new C.ImageView;n.template=_.template(jQuery("script#bbg_xiv-template_tabs_tab").html(),null,C.templateOptions);var r=new C.ImageView;r.template=_.template(jQuery("script#bbg_xiv-template_tabs_item").html(),null,C.templateOptions);var l="",s="";i.forEach(function(e,i){e.attributes.browser=C.browser,e.attributes.index=i,e.attributes.bbg_xiv_container_width=a,r.model=n.model=e,l+=n.render(!0),s+=r.render(!0)});var b=new C.GalleryView({model:{attributes:{id:t,tabs:l,items:s}}});b.template=_.template(jQuery("script#bbg_xiv-template_tabs_container").html(),null,C.templateOptions),e.empty(),e.append(b.render().$el.find("div.bbg_xiv-template_tabs_container"))},C.renderDense=function(e,i,t,a){var n=e.width(),r=new C.ImageView;r.template=_.template(jQuery("script#bbg_xiv-template_dense_title").html(),null,C.templateOptions);var l=new C.ImageView;l.template=_.template(jQuery("script#bbg_xiv-template_dense_image").html(),null,C.templateOptions);var s="",b="";i.forEach(function(e,i){e.attributes.mode=a,e.attributes.index=i,e.attributes.bbg_xiv_container_width=n,l.model=r.model=e,s+=r.render(!0),b+=l.render(!0)});var o=new C.GalleryView({model:{attributes:{id:t,gallery:i.id,mode:a,titles:s,images:b}}});o.template=_.template(jQuery("script#bbg_xiv-template_dense_container").html(),null,C.templateOptions),e.empty(),e.append(o.render().$el.find("div.bbg_xiv-dense_container"))},C.renderJustified=function(e,i){var t=new C.ImageView;t.template=_.template(jQuery("script#bbg_xiv-template_justified_item").html(),null,C.templateOptions);var a="";i.forEach(function(e){t.model=e,a+=t.render(!0)});var n=new C.GalleryView({model:{attributes:{id:i.id,items:a}}});n.template=_.template(jQuery("script#bbg_xiv-template_justified_container").html(),null,C.templateOptions),e.empty();var r=n.render().$el.find("div.bbg_xiv-justified_container");e.append(r);var l=r.find("div.bbg_xiv-justified_gallery");l.justifiedGallery({margins:5,rowHeight:C.bbg_xiv_miro_row_height,lastRow:"nojustify",refreshSensitivity:0,refreshTime:250}).on("jg.complete jg.resize",function(){l.find("img").css("margin","0")}),"touch"===C.guiInterface&&(r.addClass("bbg_xiv-touch"),l.find("div.bbg_xiv-justified_item > a").click(function(e){e.preventDefault()}),r.addClass(window.matchMedia("(max-aspect-ratio:1/1)").matches?"bbg_xiv-portrait":"bbg_xiv-landscape"));var s=(r=e.find("div.bbg_xiv-justified_container")).closest("div.bbg_xiv-gallery").removeClass("bbg_xiv-caption_visible");s.find("button.bbg_xiv-titles").attr("title",bbg_xiv_lang["show captions"]),r.find("div.bbg_xiv-justified_gallery div.bbg_xiv-justified_item").each(function(){var e=this.querySelector("img"),i=this.querySelector("div.caption");[e,i].forEach(function(e){e.addEventListener("mouseover",function(e){s.hasClass("bbg_xiv-caption_visible")&&(i.style.display="block",i.style.opacity="0.7",e.stopImmediatePropagation())}),e.addEventListener("mouseout",function(e){s.hasClass("bbg_xiv-caption_visible")&&(i.style.display="block",i.style.opacity="0.7",e.stopImmediatePropagation())})}),jQuery(e).closest("a").click(function(e){e.preventDefault()}),jQuery(i).find("a").click(function(e){var i=jQuery(this).closest("div.caption");parseFloat(i.css("opacity"))<.1&&e.preventDefault()})})},C.renderGeneric=function(e,i,t){var a=new C.ImageView;a.template=_.template(jQuery("script#bbg_xiv-template_"+t+"_item").html(),null,C.templateOptions);var n="";i.forEach(function(e){a.model=e,n+=a.render(!0)});var r=new C.GalleryView({model:{attributes:{items:n}}});r.template=_.template(jQuery("script#bbg_xiv-template_"+t+"_container").html(),null,C.templateOptions),e.empty(),e.append(r.render().$el.find("bbg_xiv-container"))};var a=[];C.dumpFieldNames=function(e){e.forEach(function(e){Object.keys(e.attributes).forEach(function(e){-1===a.indexOf(e)&&a.push(e)})});var i="<tr>";return a.forEach(function(e){i+="<th>"+e+"</th>"}),i+="</tr>"},C.dumpFieldValues=function(e){var t="";return e.forEach(function(i){t+="<tr>",a.forEach(function(e){t+="<td>"+i.attributes[e]+"</td>"}),t+="</tr>"}),t},C.renderTable=function(e,i){var t=new C.GalleryView({model:{attributes:{collection:i}}});t.template=_.template(jQuery("script#bbg_xiv-template_table_container").html(),null,C.templateOptions),e.empty(),e.append(t.render().$el.find("div.bbg_xiv-table"))},C.constructImages=function(e){var i;if(window.bbg_xiv.bbg_xiv_wp_rest_api)i=C.images[e.id];else{i=C.images[e.id]=new C.Images;try{i.reset(JSON.parse(window.bbg_xiv[e.id+"-data"]))}catch(e){return console.log("reset(JSON.parse()) failed:",e),i}}return i.id=e.id,i.constructed=!0,i},C.renderGallery=function(e,i,t){t=t||[],e.dataset.flags&&(t=t.concat(e.dataset.flags.split(",")));var h=jQuery(e),a=C.images[e.id];function n(){var l=h.find("div.bbg_xiv-dense_outer"),s=h.find("div.bbg_xiv-dense_inner"),b=h.find("div.bbg_xiv-dense_alt_inner"),o=!1,d=!1,v=NaN,g=NaN,c=null;function i(e){if(o){if("click"!==e.type){if(d)return;if(Math.abs(e.screenX-v)<10&&Math.abs(e.screenY-g)<10)return}else if(!d)return d=!0,void b.addClass("bbg_xiv-locked");var i=jQuery(this);i.hasClass("bbg_xiv-dense_outer")&&(i=b),o=d=!1,b.removeClass("bbg_xiv-locked"),v=g=NaN,i.css("opacity","0.0"),l.css("opacity","0.0");var t=jQuery("div.bbg_xiv-gallery nav.bbg_xiv-gallery_navbar").css("opacity","0.99");window.setTimeout(function(){i.hide(),l.hide(),t.css("opacity","1.0")},i!==b?2e3:500)}}s.add(b).click(i),l.add(b).mousemove(i),l.click(function(e){d?i.call(this,e):(d=!0,b.addClass("bbg_xiv-locked"))});var u=s.find("img"),f=s.find("h1.bbg_xiv-dense_title"),p=s.find("h1.bbg_xiv-dense_caption");void 0===C.titleColor&&(C.titleColor=f.css("color"),C.titleShadow=f.css("text-shadow")),"mouse"===C.guiInterface&&u.hover(function(){f.css({color:C.titleColor,textShadow:C.titleShadow}),p.css({color:C.titleColor,textShadow:C.titleShadow})},function(){f.css({color:"transparent",textShadow:"none"}),p.css({color:"transparent",textShadow:"none"})});var x=new C.ImageView;function t(e){var i;if(i="A"===this.tagName?jQuery(this):"SPAN"===this.tagName?jQuery(this.parentNode):jQuery(this),!(parseFloat(i.closest("div.caption").css("opacity"))<.1)){o=!0,d="click"===e.type,v=e.screenX,g=e.screenY,c=i.parent("div.caption");var t,a,n=i.hasClass("bbg_xiv-carousel_info")||i.hasClass("bbg_xiv-dense_alt_btn");n&&d&&b.addClass("bbg_xiv-locked"),i.hasClass("bbg_xiv-carousel_info")?t=i.closest("div.carousel").find("div.carousel-inner figure.item.active img")[0]:i.hasClass("bbg_xiv-dense_from_image")?t=i.parents("div.bbg_xiv-dense_flex_item").find("img")[0]:i.hasClass("bbg_xiv-dense_from_title")?t=jQuery("div#"+this.parentNode.id.replace("title","image")).find("img")[0]:i.hasClass("bbg_xiv-flex_from_image")?t=i.parents("div.bbg_xiv-flex_item").find("img")[0]:i.hasClass("bbg_xiv-dense_from_justified")&&(t=i.parents("div.bbg_xiv-justified_item").find("img")[0]);try{var r=jQuery(t).parents("div[data-bbg_xiv-gallery-id]")[0].dataset.bbg_xivGalleryId;a=C.images[r].get(t.dataset.bbg_xivImageId).attributes,n?(x.model={attributes:a},b.find("div.bbg_xiv-dense_alt_items").html(x.render(!0)),b.find("span.bbg_xiv-item_value a").click(function(e){jQuery(this).parents("div.bbg_xiv-dense_alt_inner").hasClass("bbg_xiv-locked")||e.preventDefault()})):(u[0].src=C.getSrc(a,"viewport",!1),a.bbg_srcset?u[0].srcset=C.getSrcset(a):u[0].removeAttribute("sizes"),f[0].textContent=C.getTitle(a),p[0].textContent=C.getCaption(a))}catch(e){console.log("##### broken 1"),n||(u[0].src=t.src)}l.show(),n?(s.hide(),b.show()):(b.hide(),s.show()),"touch"===C.guiInterface&&(f.css({color:C.titleColor,textShadow:C.titleShadow}),p.css({color:C.titleColor,textShadow:C.titleShadow})),window.setTimeout(function(){(n?b:s).css("opacity","1.0"),l.css("opacity","0.93")},100),c.css({display:"block",opacity:"0.7"}),e.preventDefault(),e.stopPropagation()}}x.template=_.template(jQuery("script#bbg_xiv-template_justified_alt_overlay").html(),null,C.templateOptions),h.find("a.bbg_xiv-carousel_info").click(function(e){m(this),t.call(this,e)}),h.find("button.bbg_xiv-dense_full_btn, button.bbg_xiv-dense_alt_btn").click(t),h.find("button.bbg_xiv-dense_alt_btn span.glyphicon").mouseenter(t)}a&&a.constructed||(a=C.constructImages(e)),C.galleries[e.id]=C.galleries[e.id]||{images:{gallery_home:a},view:"gallery_home"};var r=h.parents("div.bbg_xiv-gallery").find("nav.navbar button.bbg_xiv-titles").hide();switch(i){case"Gallery":-1!==t.indexOf("tiles")?(C.renderTiles(h,a,t),n(),r.show()):C.renderBootstrapGallery(h,a),window.setTimeout(function(){jQuery(window).resize()},100);break;case"Justified":C.renderJustified(h,a),n(),r.show();break;case"Carousel":-1!==t.indexOf("embedded-carousel")?h.addClass("bbg_xiv-embedded_carousel"):jQuery("html").css("overflow-y","hidden");var l="bbg_xiv-carousel_"+e.id;function m(e){var i=jQuery(e).parents("div.carousel");i.carousel("pause"),i.find("a.bbg_xiv-carousel_play span.glyphicon").removeClass("glyphicon-pause").addClass("glyphicon-play").parent().attr("title",bbg_xiv_lang.Play)}C.renderCarousel(h,a,l),n(),h.find("a.bbg_xiv-carousel_play").click(function(e){var i=jQuery(this),t=i.parents("div.carousel"),a=i.find("span.glyphicon");a.hasClass("glyphicon-pause")?m(this):(a.removeClass("glyphicon-play").addClass("glyphicon-pause").parent().attr("title",bbg_xiv_lang.Pause),t.carousel("next"),t.carousel("cycle")),e.preventDefault()}),h.find("a.bbg_xiv-carousel_left, a.bbg_xiv-carousel_right").click(function(){m(this)}),h.find("a.bbg_xiv-carousel_first span.glyphicon,a.bbg_xiv-carousel_last span.glyphicon").click(function(e){m(this);var i=jQuery(this).parents("div.carousel");jQuery(this.parentNode).hasClass("bbg_xiv-carousel_first")?i.carousel(0):i.carousel(a.length-1),e.preventDefault()}),h.find("a.bbg_xiv-carousel_help span.glyphicon").click(function(e){window.open(C.docUrl+"#view-carousel","_blank"),e.preventDefault()}),h.find("a.bbg_xiv-carousel_close").click(function(e){h.removeClass("bbg_xiv-embedded_carousel"),C.resetGallery(jQuery(this).parents("div.bbg_xiv-gallery"),"Carousel"),jQuery("html").css("overflow-y",""),e.preventDefault()});var s,b=h.find("div.bbg_xiv-jquery_mobile input[type='range']");b.slider();var o=!1;b.attr("type","number").val("1").change(function(){if(!o){s=Date.now();var i=jQuery(this).parents("div.carousel");m(b),window.setTimeout(function(){if(500<=Date.now()-s){var e=b.val();jQuery.isNumeric(e)&&0<=(e=parseInt(e,10)-1)&&e<a.length&&(i.carousel(e),m(b))}},500)}}).keypress(function(e){13===e.which&&(jQuery(this).blur(),e.preventDefault())}).focus(function(){m(this)}).on("slidestart",function(){m(this)}),h.find("div.carousel").on("slide.bs.carousel slid.bs.carousel",function(e){o=!0,jQuery(this).find('div.bbg_xiv-jquery_mobile input[type="number"]').val(parseInt(e.relatedTarget.dataset.index,10)+1).change(),o=!1}),-1!==t.indexOf("embedded-carousel")&&window.setTimeout(function(){var e=h.closest("div.bbg_xiv-gallery"),i=h.find("div.carousel");if(e.hasClass("bbg_xiv-fullscreen_gallery"))window.matchMedia("(max-aspect-ratio:1/1)").matches||e.scrollTop(e[0].scrollHeight-e.height()-50+.05*i.height());else if(window.matchMedia("(max-aspect-ratio:1/1)").matches)jQuery(window).scrollTop(i.offset().top-jQuery(window).height()/6);else{var t=jQuery("body"),a=jQuery("div#wpadminbar"),n=t.hasClass("admin-bar")&&"fixed"==a.css("position")?a.outerHeight():0,r=0;if(t.hasClass("bbg_xiv-twentysixteen_with_border")){var l=window.getComputedStyle(t[0],":before");r=l&&"fixed"===l.position?parseInt(l.height,10):0}jQuery(window).scrollTop(i.offset().top-i.outerHeight()/18-n-r)}},500),jQuery("#"+l).carousel({interval:C.bbg_xiv_carousel_interval,pause:!1});break;case"Tabs":C.renderTabs(h,a,"bbg_xiv-tabs_"+e.id),C.prettifyTabs(h,!0),h.find("nav.navbar ul.nav li a").click(function(){Modernizr.objectfit||jQuery(this.href.substr(this.href.lastIndexOf("#"))+" img").each(function(){var l,s=this,b=0,o=0;window.setTimeout(function e(){var i=s.naturalWidth,t=s.naturalHeight,a=jQuery(s.parentNode.parentNode.parentNode).width(),n=.7*jQuery(window).height();if(!(i&&t&&a&&n)||a<64||n<64)b++<16&&window.setTimeout(e,250);else{var r=Math.max(i/a,t/n);r<.125||8<r||void 0!==l&&r===l||(i=Math.floor(i/r),t=Math.floor(t/r),jQuery(s).css({width:i+"px",height:t+"px"}),l=r,o++<16&&window.setTimeout(e,250))}},250)}),window.setTimeout(function(){var e=jQuery(window),i=h.closest("div.bbg_xiv-gallery"),t=i.hasClass("bbg_xiv-fullscreen_gallery"),a=h.find("div.tab-content");if(window.matchMedia("(max-aspect-ratio:1/1)").matches)t?i.scrollTop(i.scrollTop()+a.position().top-e.height()/3-20):e.scrollTop(a.offset().top-e.height()/3-20);else if(t)i.scrollTop(i.scrollTop()+a.position().top-90);else{var n=jQuery("body"),r=jQuery("div#wpadminbar"),l=n.hasClass("admin-bar")&&"fixed"==r.css("position")?r.outerHeight():0,s=0;if(n.hasClass("bbg_xiv-twentysixteen_with_border")){var b=window.getComputedStyle(n[0],":before");s=b&&"fixed"===b.position?parseInt(b.height,10):0}var o=480<=e.height()?80:40;e.scrollTop(a.offset().top-o-l-s)}},500)}),h.hasClass("bbg_xiv-gallery_icons_mode")&&h.find("div.bbg_xiv-template_tabs_container div.tab-content figure.tab-pane a").click(function(e){var i=h.parent().find("nav.bbg_xiv-gallery_navbar ul.nav li.dropdown ul.bbg_xiv-view_menu li.bbg_xiv-alt_gallery");i.filter(".bbg_xiv-alt_gallery_home").hasClass("active")&&(i.find("a[data-view='gallery_"+this.dataset.galleryIndex+"']").click(),e.preventDefault())}),h.find("a.bbg_xiv-tabs_brand").click(function(e){var i=jQuery(this).siblings("button.navbar-toggle");"none"!==i.css("display")&&i.click(),e.preventDefault()}),"touch"===C.guiInterface&&jQuery("div.bbg_xiv-gallery nav.bbg_xiv-gallery_navbar").find("span.glyphicon-collapse-down").each(function(){var e=jQuery(this);"none"!==e.css("display")&&e.click()});break;case"Dense":jQuery("html").css("overflow-y","hidden"),C.renderDense(h,a,"bbg_xiv-dense_"+e.id,"title"),h.find("div.bbg_xiv-dense_images div.bbg_xiv-dense_flex_images div.bbg_xiv-dense_flex_item").css("width",100/C.bbg_xiv_flex_number_of_dense_view_columns+"%");var d=jQuery("div.bbg_xiv-dense_container button#bbg_xiv-normal_color").css("background-color"),v=jQuery("div.bbg_xiv-dense_container button#bbg_xiv-highlight_color").css("background-color");h.find("div.bbg_xiv-dense_titles ul li").hover(function(){jQuery(this).css({"background-color":v});var e=jQuery("div#"+this.id.replace("title","image")).css({"border-color":v}),i=e.position().top,t=e.height(),a=i+t,n=e.parents("div.bbg_xiv-dense_images"),r=n.scrollTop(),l=n.height();i<0?n.scrollTop(r+i-l/2-t/2):l<a&&n.scrollTop(r+(a-l)+l/2-t/2)},function(){jQuery(this).css({"background-color":d}),jQuery("div#"+this.id.replace("title","image")).css({"border-color":d})}),h.find("div.bbg_xiv-dense_flex_item").hover(function(){jQuery(this).css({"border-color":v});var e=jQuery("li#"+this.id.replace("image","title")).css({"background-color":v}),i=e.position().top,t=e.height(),a=i+t,n=e.parents("div.bbg_xiv-dense_titles"),r=n.scrollTop(),l=n.height();i<0?n.scrollTop(r+i-l/2-t/2):l<a&&n.scrollTop(r+(a-l)+l/2-t/2)},function(){jQuery(this).css({"border-color":d}),jQuery("li#"+this.id.replace("image","title")).css({"background-color":d})}),h.find("input.bbg_xiv-dense_li_mode").change(function(){if(this.checked){var e=jQuery("div.bbg_xiv-dense_container div.bbg_xiv-dense_titles");"title"===this.value?(e.find("span.bbg_xiv-dense_li_caption").hide(),e.find("span.bbg_xiv-dense_li_title").show(),e.find("span.bbg_xiv-dense_li_alt").hide()):"caption"===this.value?(e.find("span.bbg_xiv-dense_li_title").hide(),e.find("span.bbg_xiv-dense_li_caption").show(),e.find("span.bbg_xiv-dense_li_alt").hide()):"alt"===this.value&&(e.find("span.bbg_xiv-dense_li_title").hide(),e.find("span.bbg_xiv-dense_li_caption").hide(),e.find("span.bbg_xiv-dense_li_alt").show())}}),h.find("button.bbg_xiv-dense_info_btn").click(function(e){window.open(C.docUrl+"#view-dense","_blank"),e.preventDefault()}),h.find("button.bbg_xiv-dense_close_btn").click(function(e){C.resetGallery(jQuery(this).parents("div.bbg_xiv-gallery")),jQuery("html").css("overflow-y",""),e.preventDefault()}),n();break;case"Table":C.renderTable(h,a)}var g=jQuery(e.parentNode).find("nav.bbg_xiv-gallery_navbar ul.nav ul.bbg_xiv-view_menu li").show();if(("mouse"!==C.guiInterface||jQuery(window).width()<C.bbg_xiv_flex_min_width_for_dense_view)&&g.filter(".bbg_xiv-large_viewport_only").hide(),C.search[e.id])jQuery("div#"+e.id+"-alt_gallery_heading").hide(),jQuery("div#"+e.id+"-heading").show();else if(C.galleries[e.id]){jQuery("div#"+e.id+"-heading").hide();var c=void 0!==C.images[e.id].models[0].attributes.gallery_index,u=jQuery("div#"+e.id+"-alt_gallery_heading");c&&(u.find("span.bbg_xiv-alt_gallery_heading").text(C.galleryOfGalleriesTitle),h.find("a.bbg_xiv-gallery_icon").click(function(e){h.parent().find('nav.bbg_xiv-gallery_navbar ul.nav li.dropdown ul.bbg_xiv-view_menu li.bbg_xiv-alt_gallery > a[data-view="gallery_'+this.dataset.galleryIndex+'"]').click(),e.preventDefault()}),g.filter(".bbg_xiv-hide_for_gallery_icons").hide()),"gallery_home"===C.galleries[e.id].view&&!c||u.show()}},C.prettifyTabs=function(e,i){var t=e.find("nav.navbar"),a=t.find("button.navbar-toggle");"none"!==a.css("display")&&a.click(),t.find("div.navbar-collapse ul.nav").each(function(){jQuery(this).height()-8<=jQuery(this.parentNode).height()&&(jQuery(this).parents("nav.navbar").find("span.glyphicon").hide(),jQuery(this.parentNode).addClass("bbg_xiv-hide_scroll"))}),i&&e.find("span.glyphicon-collapse-down, span.glyphicon-collapse-up").click(function(){var e=jQuery(this),i=jQuery(this.parentNode).find("div.navbar-collapse");e.hasClass("glyphicon-collapse-down")?(e.removeClass("glyphicon-collapse-down").addClass("glyphicon-collapse-up"),i.removeClass("bbg_xiv-closed").addClass("bbg_xiv-open")):(e.removeClass("glyphicon-collapse-up").addClass("glyphicon-collapse-down"),i.removeClass("bbg_xiv-open").addClass("bbg_xiv-closed"))})},C.resetGallery=function(e,i){var t=e.find("div.bbg_xiv-gallery_envelope")[0],a=void 0!==C.images[t.id].models[0].attributes.gallery_index,n=C.getDefaultView(jQuery(t),a);"Carousel"===i&&"Carousel"===n&&(n="Gallery"),C.renderGallery(t,n);var r=e.find("nav.bbg_xiv-gallery_navbar ul.nav li.bbg_xiv-select_view"),l=r.find("ul.bbg_xiv-view_menu li.bbg_xiv-view").removeClass("active").filter(".bbg_xiv-view_"+n.toLowerCase()).addClass("active");r.find("a.bbg_xiv-selected_view span").text(l.text()),jQuery(window).resize()},C.getSrc=function(e,i,t){switch(C.bandwidth){case"normal":return C.bbg_xiv_wp_rest_api?e.source_url:e.url;case"low":return t?e.bbg_thumbnail_src[0]:"viewport"===i?e.bbg_large_src[0]:e.bbg_medium_large_src[0];case"very low":return t?e.bbg_thumbnail_src[0]:"viewport"===i?e.bbg_medium_large_src[0]:e.bbg_medium_src[0]}},C.getSrcset=function(e){return"auto"!==C.bbg_xiv_bandwidth?"":e.bbg_srcset},C.getTitle=function(e){return(C.bbg_xiv_wp_rest_api?e.title.rendered:e.post_title).trim()},C.getCaption=function(e,i){var t=C.bbg_xiv_wp_rest_api?jQuery(e.caption.rendered).text():e.post_excerpt;return t||i||(t=C.getAlt(e,!0)),t.trim()},C.getAlt=function(e,i){var t=C.bbg_xiv_wp_rest_api?e.alt_text:e.image_alt;return t||i||(t=C.getCaption(e,!0)),t.trim()},C.getPostContent=function(e){var i=C.bbg_xiv_wp_rest_api?e.bbg_post_content:e.post_content;return i||C.getCaption(e)},C.getSizes=function(e,i,t){return"auto"!==C.bbg_xiv_bandwidth?"":e?e.bbg_srcset?t?"10vw":"viewport"===i?"90vw":"container"===i?e.bbg_xiv_container_width+"px":"50vw":"":"viewport"!==i||t?"50vw":"100vw"};try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),C.localStorageAvailable=!0}catch(e){C.localStorageAvailable=!1}C.setCookie=function(e,i,t){if(C.localStorageAvailable)localStorage.setItem(e,i);else{var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3),document.cookie=e+"="+i+"; expires="+a.toUTCString()+"; path=/"}},C.getCookie=function(e){if(C.localStorageAvailable)return localStorage.getItem(e);var i=document.cookie,t=(i+=";").indexOf(e+"=");if(-1===t)return null;t+=e.length+1;var a=i.indexOf(";",t);return-1===a?null:i.substring(t,a)},C.calcBreakpoints=function(){var e=window.bbg_xiv.bbg_xiv_flex_min_width;C.breakpoints=[{width:2*e,cssClass:"100"},{width:3*e,cssClass:"50"},{width:4*e,cssClass:"33_3333"},{width:5*e,cssClass:"25"},{width:6*e,cssClass:"20"},{width:7*e,cssClass:"16_6666"},{width:8*e,cssClass:"14_2857"},{width:9*e,cssClass:"12_5"},{width:10*e,cssClass:"11_1111"},{width:11*e,cssClass:"10"},{width:12*e,cssClass:"9_0909"},{width:1e6,cssClass:"8_3333"}]},C.getOptionsFromCookie=function(){var e=C.getCookie("bbg_xiv");if(e){var i=JSON.parse(e),t=i.bbg_xiv_carousel_interval;jQuery.isNumeric(t)&&1e3<=t&&(C.bbg_xiv_carousel_interval=t);var a=i.bbg_xiv_flex_min_width;jQuery.isNumeric(a)&&32<=a&&a<=1024&&(C.bbg_xiv_flex_min_width=a);var n=i.bbg_xiv_miro_row_height;jQuery.isNumeric(n)&&32<=n&&n<=512&&(C.bbg_xiv_miro_row_height=n);var r=i.bbg_xiv_max_search_results;jQuery.isNumeric(r)&&1<=r&&r<1048576&&(C.bbg_xiv_max_search_results=r);var l=i.bbg_xiv_flex_number_of_dense_view_columns;jQuery.isNumeric(l)&&2<=l&&l<=32&&(C.bbg_xiv_flex_number_of_dense_view_columns=l),"string"==typeof i.bbg_xiv_default_view?(C.bbg_xiv_default_view=i.bbg_xiv_default_view,C.usingServerDefaultView=!1):C.usingServerDefaultView=!0,"string"==typeof i.bbg_xiv_bandwidth&&(C.bbg_xiv_bandwidth=i.bbg_xiv_bandwidth),"string"==typeof i.bbg_xiv_interface&&(C.bbg_xiv_interface=i.bbg_xiv_interface)}else C.usingServerDefaultView=!0,C.bbg_xiv_bandwidth="auto",C.bbg_xiv_interface="auto";var s=navigator.userAgent;-1!==s.indexOf("Firefox")?C.browser="Firefox":C.browser="","auto"===C.bbg_xiv_bandwidth?Modernizr.lowbandwidth?C.bandwidth="very low":/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(s)?C.bandwidth="very low":C.bandwidth="low":C.bandwidth=C.bbg_xiv_bandwidth,"auto"===C.bbg_xiv_interface?Modernizr.touchevents?C.guiInterface="touch":C.guiInterface="mouse":C.guiInterface=C.bbg_xiv_interface,C.bbg_xiv_wp_rest_api&&(C.wpRestApiMaxPerPage=100)},C.getOptionsFromCookie(),C.calcBreakpoints(),jQuery(window).resize(function(){var l=C.breakpoints;jQuery("div.bbg_xiv-flex_container,div.bbg_xiv-gallery_container").each(function(){var e,i=jQuery(this),t=i.width(),a=window.bbg_xiv.bbg_xiv_flex_min_width_for_caption;if(i.parents("div.bbg_xiv-gallery_envelope").hasClass("bbg_xiv-tiles_container"))e=Math.floor(t/Math.floor(t/window.bbg_xiv.bbg_xiv_flex_min_width))-1,i.find("div.bbg_xiv-flex_item").css({width:e,height:e}),e<a&&i.find("div.bbg_xiv-flex_item figcaption").hide();else{l.forEach(function(e){i.removeClass("bbg_xiv-flex_width_"+e.cssClass)});for(var n=0;n<l.length;n++)if(t<l[n].width){var r=l[n].cssClass;i.addClass("bbg_xiv-flex_width_"+r),(e=parseFloat(r.replace("_","."))/100*t)<a?i.addClass("bbg_xiv-flex_no_caption"):i.removeClass("bbg_xiv-flex_no_caption");break}}}),"mouse"===C.guiInterface&&jQuery(window).width()>=C.bbg_xiv_flex_min_width_for_dense_view?jQuery(".bbg_xiv-configure_inner .bbg_xiv-mouse_only_option").show():jQuery(".bbg_xiv-configure_inner .bbg_xiv-mouse_only_option").hide(),jQuery("div.bbg_xiv-gallery_envelope").each(function(){var e=jQuery(this.parentNode).find("nav.bbg_xiv-gallery_navbar ul.nav ul.bbg_xiv-view_menu li").show();("mouse"!==C.guiInterface||jQuery(window).width()<C.bbg_xiv_flex_min_width_for_dense_view)&&e.filter(".bbg_xiv-large_viewport_only").hide(),void 0!==C.images[this.id].models[0].attributes.gallery_index&&e.filter(".bbg_xiv-hide_for_gallery_icons").hide()})}),C.getDefaultView=function(e,i){var t;return i||null===i&&e.hasClass("bbg_xiv-gallery_icons_mode")?t="Gallery":(t=C.bbg_xiv_default_view?C.bbg_xiv_default_view:"Gallery",C.usingServerDefaultView&&(e.hasClass("bbg_xiv-default_view_gallery")?t="Gallery":e.hasClass("bbg_xiv-default_view_justified")?t="Justified":e.hasClass("bbg_xiv-default_view_carousel")?t="Carousel":e.hasClass("bbg_xiv-default_view_tabs")&&(t="Tabs")),e.parents("div.bbg_xiv-bootstrap.bbg_xiv-gallery").find("nav.bbg_xiv-gallery_navbar ul.nav li.bbg_xiv-select_view ul.bbg_xiv-view_menu li.bbg_xiv-view").removeClass("active").filter(".bbg_xiv-view_"+t.toLowerCase()).addClass("active")),t},jQuery(document).ready(function(){jQuery("div.bbg_xiv-gallery_envelope").each(function(){var e=this,i=C.getDefaultView(jQuery(e),null);C.prettifyTabs(jQuery(e.parentNode).find("div.bbg_xiv-container"),!0),C.bbg_xiv_wp_rest_api?wp.api.loadPromise.done(function(){(C.images[e.id]=new wp.api.collections.Media).reset(JSON.parse(C[e.id+"-data"])),C.renderGallery(e,i,["initial"]),jQuery(e).closest("div.bbg_xiv-gallery").addClass("bbg_xiv-home_gallery"),jQuery(window).resize()}):(C.renderGallery(e,i,["initial"]),jQuery(e).closest("div.bbg_xiv-gallery").addClass("bbg_xiv-home_gallery"))}),jQuery("nav.bbg_xiv-gallery_navbar ul.nav li.dropdown ul.bbg_xiv-view_menu li > a").click(function(e){var i=this.dataset.view,t=jQuery(this),a=t.parent(),n=a.parent(),r=a.parents("li.bbg_xiv-select_view"),l=t.parents("div.bbg_xiv-bootstrap.bbg_xiv-gallery"),s=l.find("div.bbg_xiv-gallery_envelope")[0];function b(e){c&&(jQuery.mobile.loading("hide"),jQuery(s).children().detach()),e?(_.images[i]=C.constructImages(s),_.view=i,l.find("div#"+s.id+"-alt_gallery_heading span.bbg_xiv-alt_gallery_heading").text(o),C.renderGallery(s,v)):jQuery(s).empty().append('<h1 class="bbg_xiv-warning">'+bbg_xiv_lang["Nothing Found"]+"</h1>"),jQuery(s.parentNode).find("nav.navbar form.bbg_xiv-search_form button").prop("disabled",!1)}if(0<=["Gallery","Carousel","Justified","Tabs","Dense"].indexOf(i))n.find("li.bbg_xiv-view").removeClass("active"),a.addClass("active"),r.find("a.bbg_xiv-selected_view span").text(this.textContent),C.renderGallery(s,i);else{C.search[s.id]&&delete C.search[s.id],l.find("div#"+s.id+"-alt_gallery_heading").hide();var o=this.textContent,_=C.galleries[s.id],d="gallery_home"===i&&null,v=C.getDefaultView(jQuery(s),d);n.find("li.bbg_xiv-view").removeClass("active");var g=n.find("li.bbg_xiv-view_"+v.toLowerCase()).addClass("active");if(r.find("a.bbg_xiv-selected_view span").text(g.text()),n.find("li.bbg_xiv-alt_gallery").removeClass("active"),a.addClass("active"),_.images[i])return C.images[s.id]=_.images[i],"gallery_home"!==(_.view=i)&&l.find("div#"+s.id+"-alt_gallery_heading span.bbg_xiv-alt_gallery_heading").text(o),C.renderGallery(s,v),l.find("div.bbg_xiv-gallery_tabs_container nav.navbar ul.nav-tabs li").removeClass("active").find("a[data-view='"+i+"']").parent().addClass("active"),"gallery_home"!==i?t.closest("div.bbg_xiv-gallery").removeClass("bbg_xiv-home_gallery"):t.closest("div.bbg_xiv-gallery").addClass("bbg_xiv-home_gallery"),void e.preventDefault();jQuery("div#"+s.id+"-heading").hide();var c=!0;try{jQuery(s).empty().append(jQuery.mobile.loading("show",{text:"Loading... please wait.",textVisible:!0,textonly:!1}))}catch(e){console.log(e),jQuery(s).empty().append('<h1 class="bbg_xiv-info">Loading... please wait.</h1>'),jQuery.mobile.loading._widget=void 0,c=!1}var u=this.dataset.specifiers;if(C.bbg_xiv_wp_rest_api)var f={id:"parent",ids:"include",bb_tags:"bb-tags"},p={ASC:"asc",DESC:"desc"};var x=u.match(/(\w+)="([^"]+)"/g),h={},m=!1;x.forEach(function(e){var i=e.match(/(\w+)="([^"]+)"/);C.bbg_xiv_wp_rest_api?(h[f[i[1]]?f[i[1]]:i[1]]=p[i[2]]?p[i[2]]:i[2],"ids"===i[1]&&(m=!0)):h[i[1]]=i[2]}),C.bbg_xiv_wp_rest_api&&m&&!h.orderby&&(h.orderby="include");var w=t.parents("div.navbar-collapse").first().find("form[role='search']");if(C.bbg_xiv_wp_rest_api){var y=C.images[s.id]=new wp.api.collections.Media;y.once("sync",function(){b(!!this.length)},y),h.per_page=C.wpRestApiMaxPerPage,y.fetch({data:h,success:function(){},error:function(e,i){console.log("error:r=",i),b(!1)}})}else{var j={action:"bbg_xiv_search_media",_wpnonce:w.find("input[name='_wpnonce']").val(),_wp_http_referer:w.find("input[name='_wp_http_referer']").val()};for(var Q in h)j[Q]=h[Q];jQuery.post(C.ajaxurl,j,function(e){"-1"===e&&(e=""),C.images[s.id]=null,b(!!(C[s.id+"-data"]=e))})}t.parents("div.bbg_xiv-bootstrap.bbg_xiv-gallery").find("div.bbg_xiv-gallery_tabs_container nav.navbar ul.nav-tabs li").removeClass("active").find("a[data-view='"+i+"']").parent().addClass("active"),"gallery_home"!==i?t.closest("div.bbg_xiv-gallery").removeClass("bbg_xiv-home_gallery"):t.closest("div.bbg_xiv-gallery").addClass("bbg_xiv-home_gallery")}e.preventDefault()}),jQuery("div.bbg_xiv-gallery_tabs_container nav.navbar ul.nav-tabs li a[data-view^='gallery_']").click(function(e){jQuery(this).parents("div.bbg_xiv-bootstrap.bbg_xiv-gallery").find("nav.bbg_xiv-gallery_navbar ul.nav li.dropdown ul.bbg_xiv-view_menu li > a[data-view='"+this.dataset.view+"']").click(),e.preventDefault()}),jQuery("form.bbg_xiv-search_form input[type='text']").keypress(function(e){13===e.which&&jQuery(this).blur()}),jQuery("form.bbg_xiv-search_form button").each(function(){var p,x,h,m=Number.MAX_SAFE_INTEGER,w=Number.MAX_SAFE_INTEGER;jQuery(this).click(function(e){var _=parseInt(C.bbg_xiv_max_search_results,10);C.bbg_xiv_wp_rest_api&&_>C.wpRestApiMaxPerPage&&(_=C.wpRestApiMaxPerPage);var d=jQuery(this);d.prop("disabled",!0);var i,v="search images on site",g="continue current search",c=d.parents("div.bbg_xiv-gallery").find("div.bbg_xiv-gallery_envelope")[0],t=d.parents("form[role='search']"),u=t.find("input[type='text']"),a=u.val();if(a)p=a,x=0,h=1,C.search[c.id]={history:[],index:-1,done:!1},window.bbg_xiv.bbg_xiv_wp_rest_api||(i={action:"bbg_xiv_search_media_count",query:p,_wpnonce:t.find("input[name='_wpnonce']").val(),_wp_http_referer:t.find("input[name='_wp_http_referer']").val()},jQuery.post(C.ajaxurl,i,function(e){m=parseInt(e,10)}));else if(void 0===p)return void e.preventDefault();jQuery("div#"+c.id+"-alt_gallery_heading").hide();var f=!0;try{jQuery(c).empty().append(jQuery.mobile.loading("show",{text:"Loading... please wait.",textVisible:!0,textonly:!1}))}catch(e){console.log(e),jQuery(c).empty().append('<h1 class="bbg_xiv-info">Loading... please wait.</h1>'),jQuery.mobile.loading._widget=void 0,f=!1}function n(e){if(f&&(jQuery.mobile.loading("hide"),jQuery(c).children().detach()),e){var i,t=C.constructImages(c),a=x,n=p,r=jQuery("div#"+c.id+"-heading"),l=C.search[c.id];window.bbg_xiv.bbg_xiv_wp_rest_api&&h<=w||!window.bbg_xiv.bbg_xiv_wp_rest_api&&x+t.models.length<m?(x+=_,u.val("").attr("placeholder",g),r.find("button.bbg_xiv-search_scroll_right").attr("disabled",!1)):(l.done=!0,u.attr("placeholder",v).val(p),x=p=void 0,r.find("button.bbg_xiv-search_scroll_right").attr("disabled",!0)),r.find("span.bbg_xiv-search_heading_first").text(bbg_xiv_lang["Search Results for"]+' "'+n+'"'),i=window.bbg_xiv.bbg_xiv_wp_rest_api?bbg_xiv_lang.Page+" "+(h-1)+" "+bbg_xiv_lang.of+" "+(w!==Number.MAX_SAFE_INTEGER?w:"?"):bbg_xiv_lang.Images+" "+(a+1)+" "+bbg_xiv_lang.to+" "+(a+t.models.length)+" "+bbg_xiv_lang.of+" "+(m!==Number.MAX_SAFE_INTEGER?m:"?"),r.find("span.bbg_xiv-search_heading_second").text(i),l.history.push({images:t,title:i}),l.index=l.history.length-1;var s=C.getDefaultView(jQuery(c),null);C.renderGallery(c,s),r.find("button.bbg_xiv-search_scroll_left").attr("disabled",0===l.index)}else jQuery(c).empty().append('<h1 class="bbg_xiv-warning">'+bbg_xiv_lang["Nothing Found"]+"</h1>");var b=jQuery(c.parentNode).find("nav.bbg_xiv-gallery_navbar ul.nav li.bbg_xiv-select_view"),o=b.find("ul.bbg_xiv-view_menu li.bbg_xiv-view").removeClass("active").filter(".bbg_xiv-view_gallery").addClass("active");b.find("a.bbg_xiv-selected_view span").text(o.text()),d.prop("disabled",!1)}if(jQuery(c).parent().find("div.bbg_xiv-search_header").hide(),window.bbg_xiv.bbg_xiv_wp_rest_api){var r=C.images[c.id]=new wp.api.collections.Media;r.once("sync",function(){n(!!this.length)},r),r.fetch({data:{search:p,page:h++,per_page:_},success:function(e,i,t){var a=t.xhr.getResponseHeader("link");if(a){var n=a.match(/(\?|&)page=(\d+)(&[^>]+>;|>;)\s+rel="next"/);n&&4===n.length&&jQuery.isNumeric(n[2])&&(h=parseInt(n[2],10))}m=r.state.totalObjects,w=r.state.totalPages},error:function(e,i){console.log("error:r=",i),n(!1)}})}else i={action:"bbg_xiv_search_media",query:p,limit:_,offset:x,_wpnonce:t.find("input[name='_wpnonce']").val(),_wp_http_referer:t.find("input[name='_wp_http_referer']").val()},jQuery.post(C.ajaxurl,i,function(e){C.images[c.id]=null,n(!!(C[c.id+"-data"]=e))});d.closest("div.bbg_xiv-gallery").removeClass("bbg_xiv-home_gallery"),e.preventDefault()})}),jQuery("button.bbg_xiv-home").click(function(e){jQuery(this).parents("div.bbg_xiv-bootstrap.bbg_xiv-gallery").find("nav.bbg_xiv-gallery_navbar ul.nav li.dropdown ul.bbg_xiv-view_menu li > a[data-view='gallery_home']").click(),e.preventDefault()}),jQuery("button.bbg_xiv-fullscreen").click(function(){var e=jQuery(this).closest("div.bbg_xiv-gallery");e.hasClass("bbg_xiv-fullscreen_gallery")?(e.removeClass("bbg_xiv-fullscreen_gallery").find("button.bbg_xiv-fullscreen").attr("title",bbg_xiv_lang["expand gallery to full-screen"]),jQuery("html").removeClass("bbg_xiv-fullscreen_gallery")):(e.addClass("bbg_xiv-fullscreen_gallery").find("button.bbg_xiv-fullscreen").attr("title",bbg_xiv_lang["shrink gallery from full-screen"]),jQuery("html").addClass("bbg_xiv-fullscreen_gallery")),jQuery(window).resize()}),jQuery("button.bbg_xiv-titles").click(function(){var e=jQuery(this),i=e.closest("div.bbg_xiv-bootstrap.bbg_xiv-gallery"),t=i.find("div.bbg_xiv-flex_container");if(t.length){var a=t.find("div.bbg_xiv-flex_item figure"),n=a.find("figcaption");return i.hasClass("bbg_xiv-caption_visible")?(n.hide(1e3),i.removeClass("bbg_xiv-caption_visible"),e.attr("title",bbg_xiv_lang["show titles"])):(n.show(1e3),i.addClass("bbg_xiv-caption_visible"),e.attr("title",bbg_xiv_lang["hide titles"])),void(t.hasClass("bbg_xiv-contain")&&(i.hasClass("bbg_xiv-caption_visible")?a.find("img").removeClass("bbg_xiv-vertical_center"):a.find("img").addClass("bbg_xiv-vertical_center")))}(t=i.find("div.bbg_xiv-justified_container")).length&&(i.hasClass("bbg_xiv-caption_visible")?(i.removeClass("bbg_xiv-caption_visible"),e.attr("title",bbg_xiv_lang["show captions"])):(i.addClass("bbg_xiv-caption_visible"),e.attr("title",bbg_xiv_lang["hide captions"])),window.setTimeout(function(){var e=t.find("div.caption");i.hasClass("bbg_xiv-caption_visible")?e.css({display:"block",opacity:"0.7"}):e.css({display:"none",opacity:"0.0"})},1e3))}),jQuery("button.bbg_xiv-configure").click(function(e){n.find("input#bbg_xiv-carousel_delay").val(C.bbg_xiv_carousel_interval),n.find("input#bbg_xiv-min_image_width").val(C.bbg_xiv_flex_min_width),n.find("input#bbg_xiv-miro_row_height").val(C.bbg_xiv_miro_row_height),n.find("input#bbg_xiv-max_search_results").val(C.bbg_xiv_max_search_results),n.find("input#bbg_xiv-columns_in_dense_view").val(C.bbg_xiv_flex_number_of_dense_view_columns),n.find("input[name='bbg_xiv-default_view']").prop("checked",!1),!1===C.usingServerDefaultView&&n.find("input[name='bbg_xiv-default_view'][value='"+C.bbg_xiv_default_view+"']").prop("checked",!0),n.find("input[name='bbg_xiv-bandwidth']").prop("checked",!1),n.find("input[name='bbg_xiv-bandwidth'][value='"+C.bbg_xiv_bandwidth+"']").prop("checked",!0),n.find("input[name='bbg_xiv-interface']").prop("checked",!1),n.find("input[name='bbg_xiv-interface'][value='"+C.bbg_xiv_interface+"']").prop("checked",!0);var i=jQuery(this).parents("div.bbg_xiv-gallery");i.find("div.bbg_xiv-configure_outer").show(),i.find("div.bbg_xiv-configure_inner").show(),e.preventDefault()});var n=jQuery(".bbg_xiv-configure_inner");n.find('input[type="number"]#bbg_xiv-max_search_results').change(function(){var e=jQuery(this),i=parseInt(e.val(),10),t=parseInt(e.attr("max"),10);C.bbg_xiv_wp_rest_api&&t>C.wpRestApiMaxPerPage&&(t=C.wpRestApiMaxPerPage),t<i&&e.val(t)}),n.find("button.bbg_xiv-configure_close,button.bbg_xiv-cancel_options").click(function(){var e=jQuery(this).parents("div.bbg_xiv-gallery");e.find("div.bbg_xiv-configure_outer").hide(),e.find("div.bbg_xiv-configure_inner").hide()}),n.find("button.bbg_xiv-help_options").click(function(e){window.open(C.helpOptionsUrl,"_blank"),e.preventDefault()}),n.find("button.bbg_xiv-save_options").click(function(e){C.bbg_xiv_carousel_interval=n.find("input#bbg_xiv-carousel_delay").val(),C.bbg_xiv_flex_min_width=n.find("input#bbg_xiv-min_image_width").val(),C.bbg_xiv_miro_row_height=n.find("input#bbg_xiv-miro_row_height").val(),C.bbg_xiv_max_search_results=n.find("input#bbg_xiv-max_search_results").val(),C.bbg_xiv_flex_number_of_dense_view_columns=n.find("input#bbg_xiv-columns_in_dense_view").val();var i=n.find("input[name='bbg_xiv-default_view']:checked").val();i?(C.bbg_xiv_default_view=i,C.usingServerDefaultView=!1):C.usingServerDefaultView=!0,C.bbg_xiv_bandwidth=n.find("input[name='bbg_xiv-bandwidth']:checked").val(),C.bbg_xiv_interface=n.find("input[name='bbg_xiv-interface']:checked").val();var t={bbg_xiv_carousel_interval:C.bbg_xiv_carousel_interval,bbg_xiv_flex_min_width:C.bbg_xiv_flex_min_width,bbg_xiv_miro_row_height:C.bbg_xiv_miro_row_height,bbg_xiv_max_search_results:C.bbg_xiv_max_search_results,bbg_xiv_flex_number_of_dense_view_columns:C.bbg_xiv_flex_number_of_dense_view_columns,bbg_xiv_bandwidth:C.bbg_xiv_bandwidth,bbg_xiv_interface:C.bbg_xiv_interface};!1===C.usingServerDefaultView&&(t.bbg_xiv_default_view=C.bbg_xiv_default_view),t=JSON.stringify(t),C.setCookie("bbg_xiv",t,30),C.getOptionsFromCookie(),C.calcBreakpoints();var a=jQuery(this).parents("div.bbg_xiv-gallery");a.find("div.bbg_xiv-configure_outer").hide(),a.find("div.bbg_xiv-configure_inner").hide(),C.resetGallery(jQuery(this).parents("div.bbg_xiv-gallery")),e.preventDefault()}),jQuery("button.bbg_xiv-help").click(function(e){var i=jQuery(this).closest("div.navbar-collapse").find("ul.navbar-nav li.bbg_xiv-select_view ul.bbg_xiv-view_menu li.bbg_xiv-view.active a").data("view");window.open(C.docUrl+"#view-"+i.toLowerCase(),"_blank"),this.blur(),e.preventDefault()}),jQuery("div.bbg_xiv-search_header button.bbg_xiv-search_scroll_left,div.bbg_xiv-search_header button.bbg_xiv-search_scroll_right").click(function(){var e=jQuery(this),i=e.parents("div.bbg_xiv-search_header"),t=i.attr("id").replace("-heading",""),a=i.parents("div.bbg_xiv-gallery"),n=C.search[t];if(e.hasClass("bbg_xiv-search_scroll_left"))0<n.index&&(--n.index||e.attr("disabled",!0),i.find("button.bbg_xiv-search_scroll_right").attr("disabled",!1));else{if(!(n.index<n.history.length-1))return void a.find("nav.navbar form.bbg_xiv-search_form button[type='submit']").click();++n.index,n.index===n.history.length-1&&n.done&&i.find("button.bbg_xiv-search_scroll_right").attr("disabled",!0),i.find("button.bbg_xiv-search_scroll_left").attr("disabled",!1)}if(0<=n.index&&n.index<n.history.length){var r=n.history[n.index];C.images[t]=r.images,i.find("span.bbg_xiv-search_heading_second").text(r.title);var l=a.find("div.bbg_xiv-gallery_envelope"),s=C.getDefaultView(l,null);C.renderGallery(l[0],s);var b=a.find("nav.bbg_xiv-gallery_navbar ul.nav li.bbg_xiv-select_view"),o=b.find("ul.bbg_xiv-view_menu li.bbg_xiv-view").removeClass("active").filter(".bbg_xiv-view_gallery").addClass("active");b.find("a.bbg_xiv-selected_view span").text(o.text())}}),jQuery("a.bbg_xiv-images_brand,a.bbg_xiv-tabs_brand").click(function(e){var i=jQuery(this).siblings("button.navbar-toggle");"none"!==i.css("display")&&i.click(),e.preventDefault()}),jQuery(window).on("swipe",function(e){var i=jQuery("div.bbg_xiv-gallery_envelope div.carousel");if(i.length){if(e.pageY>jQuery("div.carousel-indicators").offset().top-50)return;e.swipestop.coords[0]>e.swipestart.coords[0]?i.find("a.left.carousel-control").click():i.find("a.right.carousel-control").click()}else{jQuery("div.bbg_xiv-dense_inner").find(".bbg_xiv-dense_title, .bbg_xiv-dense_caption").each(function(){var e=jQuery(this),i=e.css("color");"transparent"!==i&&"rgba(0, 0, 0, 0)"!==i?e.css({color:"transparent",textShadow:"none"}):e.css({color:C.titleColor,textShadow:C.titleShadow})})}}),jQuery(window).on("orientationchange",function(){var e=jQuery("body");e.hasClass("admin-bar")&&"fixed"==jQuery("div#wpadminbar").css("position")?e.addClass("bbg_xiv-fixed_admin_bar"):e.removeClass("bbg_xiv-fixed_admin_bar"),jQuery("div.bbg_xiv-gallery").each(function(){C.resetGallery(jQuery(this))})}),C.bbg_xiv_wp_rest_api||jQuery(window).resize();var e=jQuery("body"),i=window.getComputedStyle(e[0],":before");if(i&&"fixed"===i.position&&0<i.zIndex){var t=parseInt(i.height,10);8<t&&t<64&&e.addClass("bbg_xiv-twentysixteen_with_border")}e.hasClass("admin-bar")&&"fixed"==jQuery("div#wpadminbar").css("position")&&e.addClass("bbg_xiv-fixed_admin_bar")})}();
//# sourceMappingURL=bbg_xiv-gallery.js.map
